# 作用域(Scope)、作用域链

## 一、作用域

### 概念

- 作用域是运行时代码中的某些特定部分中变量，函数和对象的可访问性。换句话说，作用域决定了代码区块中变量和其他资源的可见性
- 作用域就是一个独立的地盘，让变量不会外泄、暴露出去。也就是说作用域最大的用处就是隔离变量，不同作用域下同名变量不会有冲突
- 作用域分为： <font color=red>全局作用域</font> 、<font color=red>函数作用域</font>
- 作用域是分层的，内层作用域可以访问外层作用域的变量，反之则不行

### 全局作用域

#### 在代码中任何地方都能访问到的对象属于全局作用域

- 最外层函数和在最外层函数外面定义的变量拥有全局作用域

```dotnetcli
var str = "123";//最外层变量
function func(){} // 最外层函数
```

- 所有末定义直接赋值的变量自动声明为拥有全局作用域

```dotnetcli
function func(){
    str = "123" //末定义直接赋值的变量
}
```

- window 对象的所有属性拥有全局作用域

```dotnetcli
function func(){
    window.str = "123"
}
```

- 弊端
  - 污染全局命名空间
  - 容易引起命名冲突

### 函数作用域

#### 指声明在函数内部的变量，和全局作用域相反，局部作用域一般只在固定的代码片段内可访问到

```dotnetcli
function func () {
    var str="123"
    console.log(str)  //123
}
func()
console.log(str) //  str is not defined
```

- <font color=red> 块语句（大括号“｛｝”中间的语句），如 if 和 switch 条件语句或 for 和 while 循环语句，不像函数，它们不会创建一个新的作用域。在块语句中定义的变量将保留在它们已经存在的作用域中</font>

### 块级作用域

#### 块级作用域可通过新增命令 let 和 const 声明，所声明的变量在指定块的作用域外无法被访问

- 函数内部
- 在一个代码块（由一对花括号包裹）内部
- 声明变量不会变量提升
- 禁止重复声明

## 二、作用域链

#### 当前作用域中没有查到值，就会向上级作用域去查，直到查到全局作用域，这个查找的过程形成的链条就叫做作用域链
